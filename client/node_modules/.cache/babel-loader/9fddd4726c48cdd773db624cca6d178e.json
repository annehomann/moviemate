{"ast":null,"code":"import _slicedToArray from\"/Users/annehomann/coder_academy/term4/moviemate/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// ----------------------------------------\n//         Favourite Page Component\n// ----------------------------------------\nimport React,{useEffect,useState}from'react';import{Typography,Popover,Button}from'antd';import axios from'axios';// Bring in specific style\nimport'./favourite.css';import{useSelector}from'react-redux';import{IMAGE_BASE_URL,POSTER_SIZE}from'../../Config';var Title=Typography.Title;// This function is the main engine of the Favourites Page functionality \nfunction FavouritePage(){var user=useSelector(function(state){return state.user;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),Favourites=_useState2[0],setFavourites=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),Loading=_useState4[0],setLoading=_useState4[1];// Gets user ID\nvar variable={userFrom:localStorage.getItem('userId')};useEffect(function(){fetchFavouredMovie();},[]);var fetchFavouredMovie=function fetchFavouredMovie(){axios.post('/api/favourite/getFavouredMovie',variable).then(function(response){if(response.data.success){console.log(response.data.favourites);setFavourites(response.data.favourites);setLoading(false);}else{alert('Failed to get subscription videos');}});};var onClickDelete=function onClickDelete(movieId,userFrom){var variables={movieId:movieId,userFrom:userFrom};axios.post('/api/favourite/removeFromFavourite',variables).then(function(response){if(response.data.success){fetchFavouredMovie();}else{alert('Failed to Remove From Favourite');}});};var renderCards=Favourites.map(function(favourite,index){// Table of movies that have been added to favourites\nvar content=/*#__PURE__*/React.createElement(\"div\",null,favourite.moviePost?/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(IMAGE_BASE_URL).concat(POSTER_SIZE).concat(favourite.moviePost)}):\"no image\");return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(Popover,{content:content,title:\"\".concat(favourite.movieTitle)},/*#__PURE__*/React.createElement(\"td\",null,favourite.movieTitle)),/*#__PURE__*/React.createElement(\"td\",null,favourite.movieRunTime,\" mins\"),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return onClickDelete(favourite.movieId,favourite.userFrom);}},\" Remove \")));});return/*#__PURE__*/React.createElement(\"div\",{style:{width:'85%',margin:'4rem auto'}},/*#__PURE__*/React.createElement(Title,{level:2},\" Favourite Movies By Me \"),/*#__PURE__*/React.createElement(\"hr\",null),user.userData&&!user.userData.isAuth?/*#__PURE__*/React.createElement(\"div\",{style:{width:'100%',fontSize:'2rem',height:'500px',display:'flex',flexDirection:'column',justifyContent:'center',alignItems:'center'}},/*#__PURE__*/React.createElement(\"p\",null,\"Please Log in first...\"),/*#__PURE__*/React.createElement(\"a\",{href:\"/login\"},\"Go to Login page\")):!Loading&&/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Movie Title\"),/*#__PURE__*/React.createElement(\"th\",null,\"Movie RunTime\"),/*#__PURE__*/React.createElement(\"td\",null,\"Remove from favourites\"))),/*#__PURE__*/React.createElement(\"tbody\",null,renderCards)));}export default FavouritePage;","map":{"version":3,"sources":["/Users/annehomann/coder_academy/term4/moviemate/client/src/components/views/FavouritePage/FavouritePage.js"],"names":["React","useEffect","useState","Typography","Popover","Button","axios","useSelector","IMAGE_BASE_URL","POSTER_SIZE","Title","FavouritePage","user","state","Favourites","setFavourites","Loading","setLoading","variable","userFrom","localStorage","getItem","fetchFavouredMovie","post","then","response","data","success","console","log","favourites","alert","onClickDelete","movieId","variables","renderCards","map","favourite","index","content","moviePost","movieTitle","movieRunTime","width","margin","userData","isAuth","fontSize","height","display","flexDirection","justifyContent","alignItems"],"mappings":"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","sourcesContent":["// ----------------------------------------\n//         Favourite Page Component\n// ----------------------------------------\n\nimport React, { useEffect, useState } from 'react'\nimport { Typography, Popover, Button } from 'antd';\nimport axios from 'axios';\n// Bring in specific style\nimport './favourite.css';\nimport { useSelector } from 'react-redux';\nimport { IMAGE_BASE_URL, POSTER_SIZE } from '../../Config'\n\nconst { Title } = Typography;\n\n// This function is the main engine of the Favourites Page functionality \nfunction FavouritePage() {\n    const user = useSelector(state => state.user)\n\n    const [Favourites, setFavourites] = useState([])\n    const [Loading, setLoading] = useState(true)\n    // Gets user ID\n    let variable = { userFrom: localStorage.getItem('userId') }\n\n    useEffect(() => {\n        fetchFavouredMovie()\n    }, [])\n\n    const fetchFavouredMovie = () => {\n        axios.post('/api/favourite/getFavouredMovie', variable)\n            .then(response => {\n                if (response.data.success) {\n                    console.log(response.data.favourites)\n                    setFavourites(response.data.favourites)\n                    setLoading(false)\n                } else {\n                    alert('Failed to get subscription videos')\n                }\n            })\n    }\n\n    const onClickDelete = (movieId, userFrom) => {\n\n        const variables = {\n            movieId: movieId,\n            userFrom: userFrom,\n        }\n\n        axios.post('/api/favourite/removeFromFavourite', variables)\n            .then(response => {\n                if (response.data.success) {\n                    fetchFavouredMovie()\n                } else {\n                    alert('Failed to Remove From Favourite')\n                }\n            })\n    }\n\n\n    const renderCards = Favourites.map((favourite, index) => {\n\n        // Table of movies that have been added to favourites\n        const content = (\n            <div>\n                {favourite.moviePost ?\n                    <img src={`${IMAGE_BASE_URL}${POSTER_SIZE}${favourite.moviePost}`} />\n                    : \"no image\"}\n            </div>\n        );\n\n        return <tr key={index}>\n\n            <Popover content={content} title={`${favourite.movieTitle}`}>\n                <td>{favourite.movieTitle}</td>\n            </Popover>\n\n            <td>{favourite.movieRunTime} mins</td>\n            <td><button onClick={() => onClickDelete(favourite.movieId, favourite.userFrom)}> Remove </button></td>\n        </tr>\n    })\n\n    return (\n        <div style={{ width: '85%', margin: '4rem auto' }}>\n            <Title level={2} > Favourite Movies By Me </Title>\n            <hr />\n            {user.userData && !user.userData.isAuth ?\n                <div style={{ width: '100%', fontSize: '2rem', height: '500px', display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center' }}>\n                    <p>Please Log in first...</p>\n                    <a href=\"/login\">Go to Login page</a>\n                </div>\n                :\n                !Loading &&\n                <table>\n                    <thead>\n                        <tr>\n                            <th>Movie Title</th>\n                            <th>Movie RunTime</th>\n                            <td>Remove from favourites</td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {renderCards}\n                    </tbody>\n                </table>\n            }\n        </div>\n    )\n}\n\nexport default FavouritePage\n"]},"metadata":{},"sourceType":"module"}