{"ast":null,"code":"import _slicedToArray from\"/Users/annehomann/coder_academy/term4/moviemate/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// Details of each movie\nimport React,{useEffect,useState}from'react';import{List,Avatar,Row,Col,Button}from'antd';import axios from'axios';import Comments from'./Sections/Comments';import LikeDislikes from'./Sections/LikeDislikes';import{API_URL,API_KEY,IMAGE_BASE_URL,IMAGE_SIZE}from'../../Config';import GridCards from'../../commons/GridCards';import MainImage from'../../views/LandingPage/Sections/MainImage';import MovieInfo from'./Sections/MovieInfo';import Favourite from'./Sections/Favourite';// This function brings in details of the individual movie\nfunction MovieDetailPage(props){var movieId=props.match.params.movieId;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),Movie=_useState2[0],setMovie=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),Casts=_useState4[0],setCasts=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),CommentLists=_useState6[0],setCommentLists=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),LoadingForMovie=_useState8[0],setLoadingForMovie=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),LoadingForCasts=_useState10[0],setLoadingForCasts=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),ActorToggle=_useState12[0],setActorToggle=_useState12[1];var movieVariable={movieId:movieId};useEffect(function(){var endpointForMovieInfo=\"\".concat(API_URL,\"movie/\").concat(movieId,\"?api_key=\").concat(API_KEY,\"&language=en-US\");fetchDetailInfo(endpointForMovieInfo);// Promise HTTP request\naxios.post('/api/comment/getComments',movieVariable).then(function(response){console.log(response);if(response.data.success){console.log('response.data.comments',response.data.comments);setCommentLists(response.data.comments);}else{alert('Failed to get comments Info');}});},[]);var toggleActorView=function toggleActorView(){setActorToggle(!ActorToggle);};var fetchDetailInfo=function fetchDetailInfo(endpoint){fetch(endpoint).then(function(result){return result.json();}).then(function(result){console.log(result);setMovie(result);setLoadingForMovie(false);var endpointForCasts=\"\".concat(API_URL,\"movie/\").concat(movieId,\"/credits?api_key=\").concat(API_KEY);fetch(endpointForCasts).then(function(result){return result.json();}).then(function(result){console.log(result);setCasts(result.cast);});setLoadingForCasts(false);}).catch(function(error){return console.error('Error:',error);});};var updateComment=function updateComment(newComment){setCommentLists(CommentLists.concat(newComment));};return/*#__PURE__*/React.createElement(\"div\",null,!LoadingForMovie?/*#__PURE__*/React.createElement(MainImage,{image:\"\".concat(IMAGE_BASE_URL).concat(IMAGE_SIZE).concat(Movie.backdrop_path),title:Movie.original_title,text:Movie.overview}):/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\"),/*#__PURE__*/React.createElement(\"div\",{style:{width:'85%',margin:'1rem auto'}},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'flex-end'}},/*#__PURE__*/React.createElement(Favourite,{movieInfo:Movie,movieId:movieId,userFrom:localStorage.getItem('userId')})),!LoadingForMovie?/*#__PURE__*/React.createElement(MovieInfo,{movie:Movie}):/*#__PURE__*/React.createElement(\"div\",null,\"loading...\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'center',margin:'2rem'}},/*#__PURE__*/React.createElement(Button,{onClick:toggleActorView},\"Toggle Actor View \")),ActorToggle&&/*#__PURE__*/React.createElement(Row,{gutter:[16,16]},!LoadingForCasts?Casts.map(function(cast,index){return cast.profile_path&&/*#__PURE__*/React.createElement(GridCards,{actor:true,image:cast.profile_path,characterName:cast.characterName});}):/*#__PURE__*/React.createElement(\"div\",null,\"loading...\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'center'}},/*#__PURE__*/React.createElement(LikeDislikes,{video:true,videoId:movieId,userId:localStorage.getItem('userId')})),/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:'2rem'}},/*#__PURE__*/React.createElement(Comments,{movieTitle:Movie.original_title,CommentLists:CommentLists,postId:movieId,refreshFunction:updateComment}))));}export default MovieDetailPage;","map":{"version":3,"sources":["/Users/annehomann/coder_academy/term4/moviemate/client/src/components/views/MovieDetail/MovieDetail.js"],"names":["React","useEffect","useState","List","Avatar","Row","Col","Button","axios","Comments","LikeDislikes","API_URL","API_KEY","IMAGE_BASE_URL","IMAGE_SIZE","GridCards","MainImage","MovieInfo","Favourite","MovieDetailPage","props","movieId","match","params","Movie","setMovie","Casts","setCasts","CommentLists","setCommentLists","LoadingForMovie","setLoadingForMovie","LoadingForCasts","setLoadingForCasts","ActorToggle","setActorToggle","movieVariable","endpointForMovieInfo","fetchDetailInfo","post","then","response","console","log","data","success","comments","alert","toggleActorView","endpoint","fetch","result","json","endpointForCasts","cast","catch","error","updateComment","newComment","concat","backdrop_path","original_title","overview","width","margin","display","justifyContent","localStorage","getItem","map","index","profile_path","characterName","marginTop"],"mappings":"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","sourcesContent":["// Details of each movie\nimport React, { useEffect, useState } from 'react'\nimport { List, Avatar, Row, Col, Button } from 'antd';\nimport axios from 'axios';\n\nimport Comments from './Sections/Comments'\nimport LikeDislikes from './Sections/LikeDislikes';\nimport { API_URL, API_KEY, IMAGE_BASE_URL, IMAGE_SIZE } from '../../Config'\nimport GridCards from '../../commons/GridCards';\nimport MainImage from '../../views/LandingPage/Sections/MainImage';\nimport MovieInfo from './Sections/MovieInfo';\nimport Favourite from './Sections/Favourite';\n\n// This function brings in details of the individual movie\nfunction MovieDetailPage(props) {\n    const movieId = props.match.params.movieId\n    const [Movie, setMovie] = useState([])\n    const [Casts, setCasts] = useState([])\n    const [CommentLists, setCommentLists] = useState([])\n    const [LoadingForMovie, setLoadingForMovie] = useState(true)\n    const [LoadingForCasts, setLoadingForCasts] = useState(true)\n    const [ActorToggle, setActorToggle] = useState(false)\n    const movieVariable = {\n        movieId: movieId\n    }\n\n    useEffect(() => {\n\n        let endpointForMovieInfo = `${API_URL}movie/${movieId}?api_key=${API_KEY}&language=en-US`;\n        fetchDetailInfo(endpointForMovieInfo)\n\n        // Promise HTTP request\n        axios.post('/api/comment/getComments', movieVariable)\n            .then(response => {\n                console.log(response)\n                if (response.data.success) {\n                    console.log('response.data.comments', response.data.comments)\n                    setCommentLists(response.data.comments)\n                } else {\n                    alert('Failed to get comments Info')\n                }\n            })\n\n    }, [])\n\n    const toggleActorView = () => {\n        setActorToggle(!ActorToggle)\n    }\n\n    const fetchDetailInfo = (endpoint) => {\n\n        fetch(endpoint)\n            .then(result => result.json())\n            .then(result => {\n                console.log(result)\n                setMovie(result)\n                setLoadingForMovie(false)\n\n                let endpointForCasts = `${API_URL}movie/${movieId}/credits?api_key=${API_KEY}`;\n                fetch(endpointForCasts)\n                    .then(result => result.json())\n                    .then(result => {\n                        console.log(result)\n                        setCasts(result.cast)\n                    })\n\n                setLoadingForCasts(false)\n            })\n            .catch(error => console.error('Error:', error)\n            )\n    }\n\n    const updateComment = (newComment) => {\n        setCommentLists(CommentLists.concat(newComment))\n    }\n\n    return (\n        <div>\n            {/* Header */}\n            {!LoadingForMovie ?\n                <MainImage\n                    image={`${IMAGE_BASE_URL}${IMAGE_SIZE}${Movie.backdrop_path}`}\n                    title={Movie.original_title}\n                    text={Movie.overview}\n                />\n                :\n                <div>Loading...</div>\n            }\n\n\n            {/* Body */}\n            <div style={{ width: '85%', margin: '1rem auto' }}>\n\n                <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\n                    <Favourite movieInfo={Movie} movieId={movieId} userFrom={localStorage.getItem('userId')} />\n                </div>\n\n\n                {/* Movie Info */}\n                {!LoadingForMovie ?\n                    <MovieInfo movie={Movie} />\n                    :\n                    <div>loading...</div>\n                }\n\n                <br />\n                {/* Actors Grid */}\n\n                <div style={{ display: 'flex', justifyContent: 'center', margin: '2rem' }}>\n                    <Button onClick={toggleActorView}>Toggle Actor View </Button>\n                </div>\n\n                {ActorToggle &&\n                    <Row gutter={[16, 16]}>\n                        {\n                            !LoadingForCasts ? Casts.map((cast, index) => (\n                                cast.profile_path &&\n                                <GridCards actor image={cast.profile_path} characterName={cast.characterName} />\n                            )) :\n                                <div>loading...</div>\n                        }\n                    </Row>\n                }\n                <br />\n\n                <div style={{ display: 'flex', justifyContent: 'center' }}>\n                    <LikeDislikes video videoId={movieId} userId={localStorage.getItem('userId')} />\n                </div>\n\n                {/* Comments */}\n                <div style={{ marginTop: '2rem' }}>\n                    <Comments movieTitle={Movie.original_title} CommentLists={CommentLists} postId={movieId} refreshFunction={updateComment} />\n                </div>\n\n            </div>\n\n        </div>\n    )\n}\n\nexport default MovieDetailPage\n\n"]},"metadata":{},"sourceType":"module"}