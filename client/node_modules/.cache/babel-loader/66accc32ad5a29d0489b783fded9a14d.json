{"ast":null,"code":"import _slicedToArray from\"/Users/annehomann/coder_academy/term4/moviemate/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// ------------------------------------\n//         Comments Component\n// ------------------------------------\nimport React,{useState}from'react';import{Button,Input,Typography}from'antd';import axios from'axios';import{useSelector}from'react-redux';import SingleComment from'./SingleComment';import ReplyComment from'./ReplyComment';var TextArea=Input.TextArea;var Title=Typography.Title;// This function is the main engine of the Comments functionality\nfunction Comments(props){var user=useSelector(function(state){return state.user;});var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),Comment=_useState2[0],setComment=_useState2[1];var handleChange=function handleChange(e){setComment(e.currentTarget.value);};var onSubmit=function onSubmit(e){e.preventDefault();// Prompts user to be logged in to comment\nif(user.userData&&!user.userData.isAuth){return alert('Please Log in first');}var variables={content:Comment,writer:user.userData._id,postId:props.postId};console.log(variables);// Promise HTTP request\naxios.post('/api/comment/saveComment',variables).then(function(response){if(response.data.success){setComment(\"\");props.refreshFunction(response.data.result);}else{alert('Failed to save Comment');}});};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Title,{level:3},\" So...what did you think about \",props.movieTitle,\"? \"),/*#__PURE__*/React.createElement(\"hr\",null),console.log(props.CommentLists),props.CommentLists&&props.CommentLists.map(function(comment,index){return!comment.responseTo&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(SingleComment,{comment:comment,postId:props.postId,refreshFunction:props.refreshFunction}),/*#__PURE__*/React.createElement(ReplyComment,{CommentLists:props.CommentLists,postId:props.postId,parentCommentId:comment._id,refreshFunction:props.refreshFunction}));}),props.CommentLists&&props.CommentLists.length===0&&/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',height:'200px'}},\"Be the first MovieMate to share your thoughts about this movie!\"),/*#__PURE__*/React.createElement(\"form\",{style:{display:'flex'},onSubmit:onSubmit},/*#__PURE__*/React.createElement(TextArea,{style:{width:'100%',borderRadius:'5px'},onChange:handleChange,value:Comment,placeholder:\"Comment here...\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Button,{style:{width:'20%',height:'52px',backgroundColor:'green',color:'#FFFFFF',fontWeight:'bold'},onClick:onSubmit},\"Submit\")));}export default Comments;","map":{"version":3,"sources":["/Users/annehomann/coder_academy/term4/moviemate/client/src/components/views/MovieDetail/Sections/Comments.js"],"names":["React","useState","Button","Input","Typography","axios","useSelector","SingleComment","ReplyComment","TextArea","Title","Comments","props","user","state","Comment","setComment","handleChange","e","currentTarget","value","onSubmit","preventDefault","userData","isAuth","alert","variables","content","writer","_id","postId","console","log","post","then","response","data","success","refreshFunction","result","movieTitle","CommentLists","map","comment","index","responseTo","length","display","justifyContent","alignItems","height","width","borderRadius","backgroundColor","color","fontWeight"],"mappings":"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","sourcesContent":["// ------------------------------------\n//         Comments Component\n// ------------------------------------\nimport React, { useState } from 'react'\nimport { Button, Input, Typography, } from 'antd';\nimport axios from 'axios';\nimport { useSelector } from 'react-redux';\nimport SingleComment from './SingleComment';\nimport ReplyComment from './ReplyComment';\nconst { TextArea } = Input;\nconst { Title } = Typography;\n\n// This function is the main engine of the Comments functionality\nfunction Comments(props) {\n    const user = useSelector(state => state.user)\n    const [Comment, setComment] = useState(\"\")\n\n    const handleChange = (e) => {\n        setComment(e.currentTarget.value)\n    }\n\n    const onSubmit = (e) => {\n        e.preventDefault();\n\n        // Prompts user to be logged in to comment\n        if (user.userData && !user.userData.isAuth) {\n            return alert('Please Log in first');\n        }\n\n        const variables = {\n            content: Comment,\n            writer: user.userData._id,\n            postId: props.postId\n        }\n        console.log(variables)\n\n        // Promise HTTP request\n        axios.post('/api/comment/saveComment', variables)\n            .then(response => {\n                if (response.data.success) {\n                    setComment(\"\")\n                    props.refreshFunction(response.data.result)\n                } else {\n                    alert('Failed to save Comment')\n                }\n            })\n    }\n\n    return (\n        <div>\n            <br />\n            <Title level={3} > So...what did you think about {props.movieTitle}? </Title>\n            <hr />\n            {/* Comment Lists  */}\n            {console.log(props.CommentLists)}\n\n            {props.CommentLists && props.CommentLists.map((comment, index) => (\n                (!comment.responseTo &&\n                    <React.Fragment>\n                        <SingleComment comment={comment} postId={props.postId} refreshFunction={props.refreshFunction} />\n                        <ReplyComment CommentLists={props.CommentLists} postId={props.postId} parentCommentId={comment._id} refreshFunction={props.refreshFunction} />\n                    </React.Fragment>\n                )\n            ))}\n\n            {props.CommentLists && props.CommentLists.length === 0 &&\n                <div style={{ display: 'flex', justifyContent:'center', alignItems:'center', height:'200px'}} >\n                    Be the first MovieMate to share your thoughts about this movie!\n                </div>\n            }\n\n            {/* Root Comment Form */}\n            <form style={{ display: 'flex' }} onSubmit={onSubmit}>\n                <TextArea\n                    style={{ width: '100%', borderRadius: '5px' }}\n                    onChange={handleChange}\n                    value={Comment}\n                    placeholder=\"Comment here...\"\n                />\n                <br />\n                {/* Submit Button */}\n                <Button style={{ width: '20%', height: '52px', backgroundColor: 'green', color: '#FFFFFF', fontWeight: 'bold'}} onClick={onSubmit}>Submit</Button>\n            </form>\n\n        </div>\n    )\n}\n\nexport default Comments\n\n"]},"metadata":{},"sourceType":"module"}