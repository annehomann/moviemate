{"ast":null,"code":"import _toConsumableArray from\"/Users/annehomann/coder_academy/term4/moviemate/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/annehomann/coder_academy/term4/moviemate/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// ------------------------------------\n//         Landing Component\n// ------------------------------------\nimport React,{useEffect,useState,useRef}from'react';import{Typography,Row,Button}from'antd';import{API_URL,API_KEY,IMAGE_BASE_URL,IMAGE_SIZE,POSTER_SIZE}from'../../Config';import MainImage from'./Sections/MainImage';import GridCard from'../../commons/GridCards';var Title=Typography.Title;// This function is the main engine of the Landing Page\nfunction LandingPage(){// set variables\nvar buttonRef=useRef(null);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),Movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),MainMovieImage=_useState4[0],setMainMovieImage=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),Loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),CurrentPage=_useState8[0],setCurrentPage=_useState8[1];// Grid layout of movies\nuseEffect(function(){var endpoint=\"\".concat(API_URL,\"movie/popular?api_key=\").concat(API_KEY,\"&language=en-US&page=1\");fetchMovies(endpoint);},[]);useEffect(function(){window.addEventListener(\"scroll\",handleScroll);},[]);var fetchMovies=function fetchMovies(endpoint){fetch(endpoint).then(function(result){return result.json();}).then(function(result){// console.log(result)\n// console.log('Movies',...Movies)\n// console.log('result',...result.results)\nsetMovies([].concat(_toConsumableArray(Movies),_toConsumableArray(result.results)));setMainMovieImage(MainMovieImage||result.results[0]);setCurrentPage(result.page);},setLoading(false)).catch(function(error){return console.error('Error:',error);});};var loadMoreItems=function loadMoreItems(){var endpoint='';setLoading(true);console.log('CurrentPage',CurrentPage);endpoint=\"\".concat(API_URL,\"movie/popular?api_key=\").concat(API_KEY,\"&language=en-US&page=\").concat(CurrentPage+1);fetchMovies(endpoint);};var handleScroll=function handleScroll(){var windowHeight=\"innerHeight\"in window?window.innerHeight:document.documentElement.offsetHeight;var body=document.body;var html=document.documentElement;var docHeight=Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight);var windowBottom=windowHeight+window.pageYOffset;if(windowBottom>=docHeight-1){// loadMoreItems()\nconsole.log('clicked');buttonRef.current.click();}};// Movie layout GUI seen by user\nreturn/*#__PURE__*/React.createElement(\"div\",{style:{width:'100%',margin:'0'}},MainMovieImage&&/*#__PURE__*/React.createElement(MainImage,{image:\"\".concat(IMAGE_BASE_URL).concat(IMAGE_SIZE).concat(MainMovieImage.backdrop_path),title:MainMovieImage.original_title,text:MainMovieImage.overview}),/*#__PURE__*/React.createElement(\"div\",{style:{width:'85%',margin:'1rem auto'}},/*#__PURE__*/React.createElement(Title,{level:2},\" Movies by latest \"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(Row,{gutter:[16,16]},Movies&&Movies.map(function(movie,index){return/*#__PURE__*/React.createElement(React.Fragment,{key:index},/*#__PURE__*/React.createElement(GridCard,{image:movie.poster_path?\"\".concat(IMAGE_BASE_URL).concat(POSTER_SIZE).concat(movie.poster_path):null,movieId:movie.id,movieName:movie.original_title}));})),Loading&&/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'center'}},/*#__PURE__*/React.createElement(\"button\",{ref:buttonRef,className:\"loadMore\",onClick:loadMoreItems},\"Load More\"))));}export default LandingPage;","map":{"version":3,"sources":["/Users/annehomann/coder_academy/term4/moviemate/client/src/components/views/LandingPage/LandingPage.js"],"names":["React","useEffect","useState","useRef","Typography","Row","Button","API_URL","API_KEY","IMAGE_BASE_URL","IMAGE_SIZE","POSTER_SIZE","MainImage","GridCard","Title","LandingPage","buttonRef","Movies","setMovies","MainMovieImage","setMainMovieImage","Loading","setLoading","CurrentPage","setCurrentPage","endpoint","fetchMovies","window","addEventListener","handleScroll","fetch","then","result","json","results","page","catch","error","console","loadMoreItems","log","windowHeight","innerHeight","document","documentElement","offsetHeight","body","html","docHeight","Math","max","scrollHeight","clientHeight","windowBottom","pageYOffset","current","click","width","margin","backdrop_path","original_title","overview","map","movie","index","poster_path","id","display","justifyContent"],"mappings":"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","sourcesContent":["// ------------------------------------\n//         Landing Component\n// ------------------------------------\nimport React, { useEffect, useState, useRef } from 'react'\nimport { Typography, Row, Button } from 'antd';\nimport { API_URL, API_KEY, IMAGE_BASE_URL, IMAGE_SIZE, POSTER_SIZE } from '../../Config'\nimport MainImage from './Sections/MainImage'\nimport GridCard from '../../commons/GridCards'\nconst { Title } = Typography;\n\n\n// This function is the main engine of the Landing Page\nfunction LandingPage() {\n    // set variables\n    const buttonRef = useRef(null);\n\n    const [Movies, setMovies] = useState([])\n    const [MainMovieImage, setMainMovieImage] = useState(null)\n    const [Loading, setLoading] = useState(true)\n    const [CurrentPage, setCurrentPage] = useState(0)\n\n    // Grid layout of movies\n    useEffect(() => {\n        const endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=1`;\n        fetchMovies(endpoint)\n    }, [])\n\n    useEffect(() => {\n        window.addEventListener(\"scroll\", handleScroll);\n    }, [])\n\n\n    const fetchMovies = (endpoint) => {\n        fetch(endpoint)\n            .then(result => result.json())\n            .then(result => {\n                // console.log(result)\n                // console.log('Movies',...Movies)\n                // console.log('result',...result.results)\n                setMovies([...Movies, ...result.results])\n                setMainMovieImage(MainMovieImage || result.results[0])\n                setCurrentPage(result.page)\n            }, setLoading(false))\n            .catch(error => console.error('Error:', error)\n            )\n    }\n\n    const loadMoreItems = () => {\n        let endpoint = '';\n        setLoading(true)\n        console.log('CurrentPage', CurrentPage)\n        endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=${CurrentPage + 1}`;\n        fetchMovies(endpoint);\n\n    }\n\n    const handleScroll = () => {\n        const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n        const body = document.body;\n        const html = document.documentElement;\n        const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n        const windowBottom = windowHeight + window.pageYOffset;\n        if (windowBottom >= docHeight - 1) {\n\n            // loadMoreItems()\n            console.log('clicked')\n            buttonRef.current.click();\n\n        }\n    }\n\n    // Movie layout GUI seen by user\n    return (\n        <div style={{ width: '100%', margin: '0' }}>\n            {MainMovieImage &&\n                <MainImage\n                    image={`${IMAGE_BASE_URL}${IMAGE_SIZE}${MainMovieImage.backdrop_path}`}\n                    title={MainMovieImage.original_title}\n                    text={MainMovieImage.overview}\n                />\n\n            }\n\n            <div style={{ width: '85%', margin: '1rem auto' }}>\n\n                <Title level={2} > Movies by latest </Title>\n                <hr />\n                <Row gutter={[16, 16]}>\n                    {Movies && Movies.map((movie, index) => (\n                        <React.Fragment key={index}>\n                            <GridCard\n                                image={movie.poster_path ?\n                                    `${IMAGE_BASE_URL}${POSTER_SIZE}${movie.poster_path}`\n                                    : null}\n                                movieId={movie.id}\n                                movieName={movie.original_title}\n                            />\n                        </React.Fragment>\n                    ))}\n                </Row>\n\n                {Loading &&\n                    <div>Loading...</div>}\n\n                <br />\n                <div style={{ display: 'flex', justifyContent: 'center' }}>\n                    <button ref={buttonRef} className=\"loadMore\" onClick={loadMoreItems}>Load More</button>\n                </div>\n            </div>\n\n        </div>\n    )\n}\n\nexport default LandingPage\n"]},"metadata":{},"sourceType":"module"}