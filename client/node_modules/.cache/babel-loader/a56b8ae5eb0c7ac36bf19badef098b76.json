{"ast":null,"code":"var _jsxFileName = \"/Users/annehomann/coder_academy/term4/moviemate/client/src/components/views/MovieDetail/Sections/Favourite.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Button } from 'antd';\nimport { useSelector } from 'react-redux';\n\nfunction Favourite(props) {\n  const user = useSelector(state => state.user);\n  const movieId = props.movieId;\n  const userFrom = props.userFrom;\n  const movieTitle = props.movieInfo.title;\n  const moviePost = props.movieInfo.backdrop_path;\n  const movieRunTime = props.movieInfo.runtime;\n  const [FavouriteNumber, setFavouriteNumber] = useState(0);\n  const [Favourited, setFavourited] = useState(false);\n  const variables = {\n    movieId: movieId,\n    userFrom: userFrom,\n    movieTitle: movieTitle,\n    moviePost: moviePost,\n    movieRunTime: movieRunTime\n  };\n\n  const onClickFavourite = () => {\n    if (user.userData && !user.userData.isAuth) {\n      return alert('Please Log in first');\n    }\n\n    if (Favourited) {\n      //when we are already subscribed \n      axios.post('/api/favourite/removeFromFavourite', variables).then(response => {\n        if (response.data.success) {\n          setFavouriteNumber(FavouriteNumber - 1);\n          setFavourited(!Favourited);\n        } else {\n          alert('Failed to Remove From Favourite');\n        }\n      });\n    } else {\n      // when we are not subscribed yet\n      axios.post('/api/favourite/addToFavourite', variables).then(response => {\n        if (response.data.success) {\n          setFavouriteNumber(FavouriteNumber + 1);\n          setFavourited(!Favourited);\n        } else {\n          alert('Failed to Add To Favourite');\n        }\n      });\n    }\n  };\n\n  useEffect(() => {\n    axios.post('/api/favourite/favouriteNumber', variables).then(response => {\n      if (response.data.success) {\n        setFavouriteNumber(response.data.subscribeNumber);\n      } else {\n        alert('Failed to get Favourite Number');\n      }\n    });\n    axios.post('/api/favourite/favourited', variables).then(response => {\n      if (response.data.success) {\n        setFavourited(response.data.subcribed);\n      } else {\n        alert('Failed to get Favourite Information');\n      }\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClickFavourite,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, \" \", !Favourited ? \"Add to Favourite\" : \"Not Favourite\", \" \", FavouriteNumber));\n}\n\nexport default Favourite;","map":{"version":3,"sources":["/Users/annehomann/coder_academy/term4/moviemate/client/src/components/views/MovieDetail/Sections/Favourite.js"],"names":["React","useEffect","useState","axios","Button","useSelector","Favourite","props","user","state","movieId","userFrom","movieTitle","movieInfo","title","moviePost","backdrop_path","movieRunTime","runtime","FavouriteNumber","setFavouriteNumber","Favourited","setFavourited","variables","onClickFavourite","userData","isAuth","alert","post","then","response","data","success","subscribeNumber","subcribed"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from 'axios';\nimport { Button } from 'antd';\nimport { useSelector } from 'react-redux';\n\nfunction Favourite(props) {\n    const user = useSelector(state => state.user)\n\n    const movieId = props.movieId\n    const userFrom = props.userFrom\n    const movieTitle = props.movieInfo.title\n    const moviePost = props.movieInfo.backdrop_path\n    const movieRunTime = props.movieInfo.runtime\n\n    const [FavouriteNumber, setFavouriteNumber] = useState(0)\n    const [Favourited, setFavourited] = useState(false)\n    const variables = {\n        movieId: movieId,\n        userFrom: userFrom,\n        movieTitle: movieTitle,\n        moviePost: moviePost,\n        movieRunTime: movieRunTime\n    }\n\n    const onClickFavourite = () => {\n\n        if (user.userData && !user.userData.isAuth) {\n            return alert('Please Log in first');\n        }\n\n        if (Favourited) {\n            //when we are already subscribed \n            axios.post('/api/favourite/removeFromFavourite', variables)\n                .then(response => {\n                    if (response.data.success) {\n                        setFavouriteNumber(FavouriteNumber - 1)\n                        setFavourited(!Favourited)\n                    } else {\n                        alert('Failed to Remove From Favourite')\n                    }\n                })\n\n        } else {\n            // when we are not subscribed yet\n\n            axios.post('/api/favourite/addToFavourite', variables)\n                .then(response => {\n                    if (response.data.success) {\n                        setFavouriteNumber(FavouriteNumber + 1)\n                        setFavourited(!Favourited)\n                    } else {\n                        alert('Failed to Add To Favourite')\n                    }\n                })\n        }\n    }\n\n    useEffect(() => {\n\n        axios.post('/api/favourite/favouriteNumber', variables)\n            .then(response => {\n                if (response.data.success) {\n                    setFavouriteNumber(response.data.subscribeNumber)\n                } else {\n                    alert('Failed to get Favourite Number')\n                }\n            })\n\n        axios.post('/api/favourite/favourited', variables)\n            .then(response => {\n                if (response.data.success) {\n                    setFavourited(response.data.subcribed)\n                } else {\n                    alert('Failed to get Favourite Information')\n                }\n            })\n\n    }, [])\n\n\n    return (\n        <>\n            <Button onClick={onClickFavourite} > {!Favourited ? \"Add to Favourite\" : \"Not Favourite\"} {FavouriteNumber}</Button>\n        </>\n    )\n}\n\nexport default Favourite\n\n"]},"metadata":{},"sourceType":"module"}