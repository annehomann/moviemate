{"ast":null,"code":"import _slicedToArray from\"/Users/annehomann/coder_academy/term4/moviemate/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// ------------------------------------\n//         Like/Dislike Component\n// ------------------------------------\nimport React,{useEffect,useState}from'react';import{Tooltip,Icon}from'antd';import Axios from'axios';import{useSelector}from'react-redux';// This function is the main engine for the like/dislike functionality\nfunction LikeDislikes(props){var user=useSelector(function(state){return state.user;});var _useState=useState(0),_useState2=_slicedToArray(_useState,2),Likes=_useState2[0],setLikes=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),Dislikes=_useState4[0],setDislikes=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),LikeAction=_useState6[0],setLikeAction=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),DislikeAction=_useState8[0],setDislikeAction=_useState8[1];var variable={};if(props.video){variable={videoId:props.videoId,userId:props.userId};}else{variable={commentId:props.commentId,userId:props.userId};}useEffect(function(){// Promise HTTP request for Like function\nAxios.post('/api/like/getLikes',variable).then(function(response){console.log('getLikes',response.data);if(response.data.success){// How many likes does this comment have \nsetLikes(response.data.likes.length);// If Like button is already clicked \nresponse.data.likes.map(function(like){if(like.userId===props.userId){setLikeAction('liked');}});}else{alert('Failed to get likes');}});// Promise HTTP request for Dislike function\nAxios.post('/api/like/getDislikes',variable).then(function(response){console.log('getDislike',response.data);if(response.data.success){// How many likes does this comment have \nsetDislikes(response.data.dislikes.length);// If Dislike button is already clicked\nresponse.data.dislikes.map(function(dislike){if(dislike.userId===props.userId){setDislikeAction('disliked');}});}else{alert('Failed to get dislikes');}});},[]);var onLike=function onLike(){// Prompts user to be logged in to like movie\nif(user.userData&&!user.userData.isAuth){return alert('Please Log in first');}if(LikeAction===null){Axios.post('/api/like/upLike',variable).then(function(response){if(response.data.success){setLikes(Likes+1);setLikeAction('liked');// If dislike button is already clicked\nif(DislikeAction!==null){setDislikeAction(null);setDislikes(Dislikes-1);}}else{alert('Failed to increase the like');}});}else{Axios.post('/api/like/unLike',variable).then(function(response){if(response.data.success){setLikes(Likes-1);setLikeAction(null);}else{alert('Failed to decrease the like');}});}};var onDisLike=function onDisLike(){// Prompts user to be logged in to dislike movie\nif(user.userData&&!user.userData.isAuth){return alert('Please Log in first');}if(DislikeAction!==null){// Promise HTTP request\nAxios.post('/api/like/unDisLike',variable).then(function(response){if(response.data.success){setDislikes(Dislikes-1);setDislikeAction(null);}else{alert('Failed to decrease dislike');}});}else{// Promise HTTP request\nAxios.post('/api/like/upDisLike',variable).then(function(response){if(response.data.success){setDislikes(Dislikes+1);setDislikeAction('disliked');//If dislike button is already clicked\nif(LikeAction!==null){setLikeAction(null);setLikes(Likes-1);}}else{alert('Failed to increase dislike');}});}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"span\",{key:\"comment-basic-like\"},/*#__PURE__*/React.createElement(Tooltip,{title:\"Like\"},/*#__PURE__*/React.createElement(Icon,{type:\"like\",theme:LikeAction==='liked'?'filled':'outlined',onClick:onLike})),/*#__PURE__*/React.createElement(\"span\",{style:{paddingLeft:'8px',cursor:'auto'}},Likes)),\"\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/React.createElement(\"span\",{key:\"comment-basic-dislike\"},/*#__PURE__*/React.createElement(Tooltip,{title:\"Dislike\"},/*#__PURE__*/React.createElement(Icon,{type:\"dislike\",theme:DislikeAction==='disliked'?'filled':'outlined',onClick:onDisLike})),/*#__PURE__*/React.createElement(\"span\",{style:{paddingLeft:'8px',cursor:'auto'}},Dislikes)));}export default LikeDislikes;","map":{"version":3,"sources":["/Users/annehomann/coder_academy/term4/moviemate/client/src/components/views/MovieDetail/Sections/LikeDislikes.js"],"names":["React","useEffect","useState","Tooltip","Icon","Axios","useSelector","LikeDislikes","props","user","state","Likes","setLikes","Dislikes","setDislikes","LikeAction","setLikeAction","DislikeAction","setDislikeAction","variable","video","videoId","userId","commentId","post","then","response","console","log","data","success","likes","length","map","like","alert","dislikes","dislike","onLike","userData","isAuth","onDisLike","paddingLeft","cursor"],"mappings":"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","sourcesContent":["// ------------------------------------\n//         Like/Dislike Component\n// ------------------------------------\nimport React, { useEffect, useState } from 'react'\nimport { Tooltip, Icon } from 'antd';\nimport Axios from 'axios';\nimport { useSelector } from 'react-redux';\n\n// This function is the main engine for the like/dislike functionality\nfunction LikeDislikes(props) {\n    const user = useSelector(state => state.user)\n\n    const [Likes, setLikes] = useState(0)\n    const [Dislikes, setDislikes] = useState(0)\n    const [LikeAction, setLikeAction] = useState(null)\n    const [DislikeAction, setDislikeAction] = useState(null)\n    let variable = {};\n\n    if (props.video) {\n        variable = { videoId: props.videoId, userId: props.userId }\n    } else {\n        variable = { commentId: props.commentId, userId: props.userId }\n    }\n\n    useEffect(() => {\n        // Promise HTTP request for Like function\n        Axios.post('/api/like/getLikes', variable)\n            .then(response => {\n                console.log('getLikes',response.data)\n\n                if (response.data.success) {\n                    // How many likes does this comment have \n                    setLikes(response.data.likes.length)\n\n                    // If Like button is already clicked \n                    response.data.likes.map(like => {\n                        if (like.userId === props.userId) {\n                            setLikeAction('liked')\n                        }\n                    })\n                } else {\n                    alert('Failed to get likes')\n                }\n            })\n\n        // Promise HTTP request for Dislike function\n        Axios.post('/api/like/getDislikes', variable)\n            .then(response => {\n                console.log('getDislike',response.data)\n                if (response.data.success) {\n                    // How many likes does this comment have \n                    setDislikes(response.data.dislikes.length)\n\n                    // If Dislike button is already clicked\n                    response.data.dislikes.map(dislike => {\n                        if (dislike.userId === props.userId) {\n                            setDislikeAction('disliked')\n                        }\n                    })\n                } else {\n                    alert('Failed to get dislikes')\n                }\n            })\n    }, [])\n\n\n    const onLike = () => {\n       \n        // Prompts user to be logged in to like movie\n        if (user.userData && !user.userData.isAuth) {\n            return alert('Please Log in first');\n        }\n\n        if (LikeAction === null) {\n\n            Axios.post('/api/like/upLike', variable)\n                .then(response => {\n                    if (response.data.success) {\n\n                        setLikes(Likes + 1)\n                        setLikeAction('liked')\n\n                        // If dislike button is already clicked\n                        if (DislikeAction !== null) {\n                            setDislikeAction(null)\n                            setDislikes(Dislikes - 1)\n                        }\n\n\n                    } else {\n                        alert('Failed to increase the like')\n                    }\n                })\n\n\n        } else {\n\n            Axios.post('/api/like/unLike', variable)\n                .then(response => {\n                    if (response.data.success) {\n\n                        setLikes(Likes - 1)\n                        setLikeAction(null)\n\n                    } else {\n                        alert('Failed to decrease the like')\n                    }\n                })\n        }\n    }\n\n\n    const onDisLike = () => {\n\n        // Prompts user to be logged in to dislike movie\n        if (user.userData && !user.userData.isAuth) {\n            return alert('Please Log in first');\n        }\n\n        if (DislikeAction !== null) {\n\n            // Promise HTTP request\n            Axios.post('/api/like/unDisLike', variable)\n                .then(response => {\n                    if (response.data.success) {\n\n                        setDislikes(Dislikes - 1)\n                        setDislikeAction(null)\n\n                    } else {\n                        alert('Failed to decrease dislike')\n                    }\n                })\n\n        } else {\n\n            // Promise HTTP request\n            Axios.post('/api/like/upDisLike', variable)\n                .then(response => {\n                    if (response.data.success) {\n\n                        setDislikes(Dislikes + 1)\n                        setDislikeAction('disliked')\n\n                        //If dislike button is already clicked\n                        if(LikeAction !== null ) {\n                            setLikeAction(null)\n                            setLikes(Likes - 1)\n                        }\n\n                    } else {\n                        alert('Failed to increase dislike')\n                    }\n                })\n        }\n    }\n\n    return (\n        <React.Fragment>\n            <span key=\"comment-basic-like\">\n                <Tooltip title=\"Like\">\n                    <Icon type=\"like\"\n                        theme={LikeAction === 'liked' ? 'filled' : 'outlined'}\n                        onClick={onLike} />\n                </Tooltip>\n                <span style={{ paddingLeft: '8px', cursor: 'auto' }}>{Likes}</span>\n            </span>&nbsp;&nbsp;&nbsp;&nbsp;\n            <span key=\"comment-basic-dislike\">\n                <Tooltip title=\"Dislike\">\n                    <Icon\n                        type=\"dislike\"\n                        theme={DislikeAction === 'disliked' ? 'filled' : 'outlined'}\n                        onClick={onDisLike}\n                    />\n                </Tooltip>\n                <span style={{ paddingLeft: '8px', cursor: 'auto' }}>{Dislikes}</span>\n            </span>\n        </React.Fragment>\n    )\n}\n\nexport default LikeDislikes\n"]},"metadata":{},"sourceType":"module"}